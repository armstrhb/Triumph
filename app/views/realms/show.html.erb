<html>
<head>
<%= stylesheet_link_tag "realmDetails", :media => 'all' %>
<%= javascript_include_tag "//www.google.com/jsapi", "chartkick" %>
</head>
<div class="container">

  <div class="jumbotron">
    <h1><%= @realm.name %></h1>
  </div>
  <div id="superuser_ish" class="row">
    <div class="col-md-12">

      <!--<%= button_to 'Delete Realm', {:controller => :realms, :action => 'destroy', :id => @realm.id }, :method => :delete %>-->
      <!--<%= link_to "Delete Realm", @realm, confirm: "Are you sure you want to delete '#{@realm.name}'?", method: :delete %>-->
      <%= link_to 'Achievements', '/achievements/' + @realm.id.to_s, class: 'btn' %>
      <%= link_to 'Delete Realm', @realm, class: 'btn btn-danger', data: {confirm: "Are you sure you want to delete #{@realm.name}?" }, method: :delete %>
      <p>Panels in place. Temporary data grabs below.</p>
    </div>
  </div>

  <div class="row">
   <div class="col-lg-4">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">Top Users</h3>
      </div>
      <div class="panel-body">
          <% @top_users.each do |u| %>
            <p>
              <%= u["user"] %> with <%= u["points"] %> Achievement Points
            </p>
          <% end %>
      </div>
    </div>
  </div>

  <div class="col-lg-8">
    <div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Achievements</h3>
  </div>
     <div class="panel-body">

     </div>
   </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-6">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">Active Achievements</h3>
      </div>
      <div class="panel-body">
      </div>
    </div>
  </div>

  <div class="col-lg-6">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">My Progress</h3>
      </div>
      <div class="panel-body">
      </div>
    </div>
  </div>
</div>

<div class="row">
    <div class="col-lg-12">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">My Stats</h3>
        </div>
        <div class="panel-body">

        </div>
      </div>
    </div>
</div>



  <div class="row">
    <div class="col-sm-4">
      <%= pluralize(@realm.achievements.length, "achievement") %>
    </div>
    <div class="col-sm-4">
      <%= pluralize(@realm.users.length, "user") %>
    </div>
    <div class="col-sm-4">
      <%= pluralize(@total_points, "total points") %>
    </div>
  </div>





  <div class="row">
    <div class="col-sm-12">
      Recent Achievements
    </div>
    <% if @recent_achievements.length == 0 %>
      <div class="col-sm-12">
        <span class="text-muted">No recent achievements.</span>
      </div>
    <% else %>
      <% @recent_achievements.each do |a| %>
        <div class="col-sm-2">
          <%= a.complete_date.to_formatted_s(:short) %>
        </div>
        <div class="col-sm-2">
          <%= a.user.name %>
        </div>
        <div class="col-sm-6">
          <%= a.achievement.title %>
        </div>
        <div class="col-sm-2">
          + <%= a.achievement.points %>
        </div>
      <% end %>
    <% end %>
  </div>







  <div class="row">
    <div class="col-sm-12">
      Top Users
    </div>
    <% if @top_users.length == 0 %>
      <div class="col-sm-12">
        <span class="text-muted">No users.</span>
      </div>
    <% else %>
      <% @top_users.each do |u| %>
        <div class="col-sm-6">
          <%= u["user"] %>
        </div>
        <div class="col-sm-6">
          <%= u["points"] %>
        </div>
      <% end %>
    <% end %>
  </div>





  <div class="row">
    <div class="col-sm-12">
      New Users
    </div>
    <% if @realm.new_users.length == 0 %>
      <div class="col-sm-12">
        <span class="text-muted">No new users.</span>
      </div>
    <% else %>
      <% @realm.new_users.each do |u| %>
        <div class="col-sm-6">
          <%= u.name %>
        </div>
        <div class="col-sm-6">
          <%= u.created_at.to_formatted_s(:short) %>
        </div>
      <% end %>
    <% end %>
  </div>



</div>
</html>
