<div class="container">
  <div class="header">
    <h1><%= @realm.name %> <small>Rarities</small></h1>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <%= link_to "Back to Realm Achievements", achievements_path(@realm), :class => 'btn btn-default' %>
      <button id="new-rarity-button" class="btn" data-toggle="modal" data-target="#new-rarity-modal">New Rarity</button>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
        <table id="rarity-table" class='table table-striped table-hover' <%= "style=display:none;" if @rarities.length == 0 %>>
          <tr>
            <th>Rarity</th>
            <th>Description</th>
            <th>Achievements</th>
          </tr>
          <%= render @rarities %>
        </table>
      <% if @rarities.length == 0 %>
        <span class="text-muted">There are no rarities in this realm.</span>
      <% end %>
    </div>
  </div>

  <div id="new-rarity-modal" class="modal fade" tabindex="-1" aria-labelledby="rarityModalLabel" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="rarityModalLabel">Create Rarity</h4>
      </div>
      <div class="modal-body">
      <%= form_for(@new_rarity, :url => create_rarity_path, :html => { :id => "new_rarity_form", :class => "form"}, remote: true) do |f| %>
        <%= f.hidden_field :realm_id, :value => @realm.id %>
        <div class='form-group'>
          <%= f.label :name %>
          <%= f.text_field :name, :class => 'form-control' %>
        </div>
        <div class="form-group">
          <%= f.label :description %>
          <%= f.text_field :description, :class => 'form-control' %>
        </div>
      </div>
      <div class="modal-footer">
        <%= f.submit :class => 'btn btn-primary' %>
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      </div>
      <% end %>
    </div>
    </div>
  </div>
</div>
</div>




<script>
  $.fn.modal_success = function(){
      this.modal('hide');
  };

  $("tr[data-link]").click(function() {
    window.location = this.dataset.link;
  });
</script>
