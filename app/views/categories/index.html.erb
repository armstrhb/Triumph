<%= stylesheet_link_tag 'categoryIndex', :media => 'all' %>

<div class="container">
  <div class="jumbotron">
    <h1>Achievement Categories</h1>
  </div>

<div class="row">
  <div class="col-sm-12 well well-sm">
    <ul class="nav nav-pills">
      <li><%= link_to "Back to Achievements", achievements_path(@realm) %></li>
      <% if @realm.group.users.include?(current_user) %>
        <li><a id="#new-category-button" href="#" class="text-success" data-toggle="modal" data-target="#new-category-modal">New Category</a></li>
      <% end %>
    </ul>
  </div>
</div>

<div class="row">
  <div class="col-sm-12">
    <% if @categories.length > 0 %>
    <table id="category-table" class="table table-striped table-hover">
      <tr>
        <th>Category</th>
        <th>Description</th>
        <th>Realm</th>
      </tr>
      <%= render @categories %>
    </table>
    <% else %>
  </div>
    <div class="col-sm-12">
      <span class="text-muted">There are no categories in this realm. Lame.</span>
    </div>
    <div class="col-sm-12">
      <div class="row">
        <%= link_to 'New Category', new_category_path, class: "btn btn-default" %>
      </div>
    </div>
    <% end %>
  </div>


 <div id="new-category-modal" class="modal fade" tabindex="-1" aria-labelledby="categoryModalLabel" role="dialog" aria-hidden="true">
   <div class="modal-dialog">
     <div class="modal-content">
       <div class="modal-header">
         <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
         <h4 class="modal-title" id="categoryModalLabel">Create Category</h4>
       </div>
       <div class="modal-body">
         <%= form_for(@new_category, :url => create_category_path, :html => { :id => 'new_category_form', :class => 'form'}, remote: true) do |f| %>
         <%= f.hidden_field :realm_id, :value => @realm.id %>
          <div class="form-group">
            <%= f.label :name %>
            <%= f.text_field :name, :class => 'form-control' %>
          </div>
          <div class="form-group">
            <%= f.label :description %>
            <%= f.text_field :description, :class => 'form-control' %>
          </div>
       </div>
       <div class="modal-footer">
         <%= f.submit :class => 'btn btn-primary' %>
         <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
       </div>
       <% end %>
     </div>
   </div>
 </div>
</div>
